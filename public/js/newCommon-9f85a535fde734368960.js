webpackJsonp([2,4],[function(t,exports,e){e(16),e(19),e(20),t.exports=e(23)},,,,,function(t,exports){t.exports=function(t){$.ajaxSetup({cache:!1}),$.ajax({type:t.type||"GET",url:t.url,data:t.data||{},dataType:t.dataType||"json",contentType:t.contentType||"application/json",success:function(e){t.success(e)},error:function(){t.error&&t.error()}})}},,function(t,exports){t.exports={SOURCE:"http://source.soyyin.com/",BANNER_NUM:6,FLOOR_NUM:4}},,,,function(t,exports){!function(){function e(t,e){return(/string|function/.test(typeof e)?l:s)(t,e)}function i(t,e){return"string"!=typeof t&&(e=typeof t,"number"===e?t+="":t="function"===e?i(t.call(t)):""),t}function n(t){return p[t]}function o(t){return i(t).replace(/&(?![\w#]+;)|[<>"']/g,n)}function r(t,e){if(h(t))for(var i=0,n=t.length;n>i;i++)e.call(t,t[i],i,t);else for(i in t)e.call(t,t[i],i)}function a(t,e){var i=/(\/)[^\/]+\1\.\.\1/,n=("./"+t).replace(/[^\/]+$/,""),o=n+e;for(o=o.replace(/\/\.\//g,"/");o.match(i);)o=o.replace(i,"/");return o}function s(t,i){var n=e.get(t)||c({filename:t,name:"Render Error",message:"Template not found"});return i?n(i):n}function l(t,e){if("string"==typeof e){var i=e;e=function(){return new d(i)}}var n=u[t]=function(i){try{return new e(i,t)+""}catch(t){return c(t)()}};return n.prototype=e.prototype=f,n.toString=function(){return e+""},n}function c(t){var e="{Template Error}",i=t.stack||"";if(i)i=i.split("\n").slice(0,2).join("\n");else for(var n in t)i+="<"+n+">\n"+t[n]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+i),e}}var u=e.cache={},d=this.String,p={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},h=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},f=e.utils={$helpers:{},$include:function(t,e,i){return t=a(i,t),s(t,e)},$string:i,$escape:o,$each:r},g=e.helpers=f.$helpers;e.get=function(t){return u[t.replace(/^\.\//,"")]},e.helper=function(t,e){g[t]=e},t.exports=e}()},function(t,exports,e){var i=e(11),n=e(7);i.helper("dateFormat",function(t,e){t=new Date(parseInt(t.replace("/Date(","").replace(")/",""),10)),t=new Date(t);var i={Y:t.getYear(),M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),q:Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};return e=e.replace(/([yMdhmsqS])+/g,function(e,n){var o=i[n];return void 0!==o?(e.length>1&&(o="0"+o,o=o.substr(o.length-2)),o):"y"===n?(t.getFullYear()+"").substr(4-e.length):e})}),i.helper("getUrl",function(t){return n.SOURCE+t}),i.helper("processPrice",function(t){var e=t+"",i=e.split("");1===i.length?i.unshift("0","0"):2===i.length&&i.unshift("0"),i.splice(i.length-2,0,".");var n=i.join("");return n})},,,,function(t,exports,e){e(17);var i=e(5);e(12);var n={lognBoxShadeLayer:$("#login_box_shade_layer"),loginBox:$("#login_box"),loginBoxClose:$("#login_box_close"),loginTypeLi:$("#login_type li"),getPhoneCodeBtn:$("#get_phone_code"),loginShowCaptchaImg:$("#login_show_captcha_img"),autoLoginBtn:$("#auto_login"),loginSubmitBtn:$("#login_submit"),errorTipWhenLogin:$("#login_error_tip"),errorTipWhenCodeLogin:$("#quick_login_error_tip"),callBackWhenFinishLogin:null,init:function(){!("/"===location.pathname&&location.hash.indexOf("showLogin")>0)||$.cookie("id")&&$.cookie("username")||n.showPop(),this.setHeaderLogin(),this.initBtns()},validatePhone:function(t){var e=/^[0-9]{11}$/;return!!e.test(t)||($("#quick_login_error_tip").html("请输入正确的手机号"),$("#login_item_phone").focus(),!1)},waitLoginCode:function(){var t=this,e=$("#get_phone_code");e.removeClass("btn-enable").addClass("btn-disable").text("重新获取60s");var i=59;t.set_login_time=setInterval(function(){e.text("重新获取"+i+"s"),i--,i===-1&&(clearInterval(t.set_login_time),$("#get_phone_code").removeClass("btn-disable").addClass("btn-enable").text("获取验证码"))},1e3)},sendCode:function(){var t=this;if(t.getPhoneCodeBtn.hasClass("btn-disable"))return!1;var e=$("#login_item_phone");return!!t.validatePhone(e.val())&&($("#quick_login_error_tip").html(""),void i({type:"post",url:"/api/v2/web/users/send-login-code",data:JSON.stringify({phone:e.val()}),success:function(e){var i=$("#quick_login_error_tip");0===e.result?t.waitLoginCode():($("#get_phone_code").removeClass("btn-disable").addClass("btn-enable").text("获取验证码"),4===e.result?i.html(e.error_message):9===e.result?i.html("发送短信失败，请稍后再试"):1010===e.result?i.html("手机号格式错误"):1009===e.result?i.html("文字验证码错误"):1012===e.result&&i.html("请求的太频繁，请稍等1分钟重试"))}}))},validateUsernamePwd:function(t,e){var i=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/,n=/^[0-9]{11}$/;return i.test(t)||n.test(t)?t.length>50?(this.errorTipWhenLogin.html("账号过长"),$("#login_item_username").focus(),!1):0===e.length?(this.errorTipWhenLogin.html("密码不能为空"),$("#login_item_password").focus(),!1):!(e.length>50)||(this.errorTipWhenLogin.html("密码过长"),$("#login_item_password").focus(),!1):(this.errorTipWhenLogin.html("请输入正确的邮箱或手机号"),!1)},validatePhoneCode:function(t,e){var i=/^[0-9]{4}$/;return!!this.validatePhone(t)&&(!!i.test(e)||(this.errorTipWhenCodeLogin.html("请输入正确的验证码"),$("#login_item_code").focus(),!1))},userLogin:function(){var t=this;if(!t.loginSubmitBtn.hasClass("btn-disable")){$("#login_error_tip, #quick_login_error_tip").html("");var e,n,o=$(".login-type-checked").attr("data-type");if("commonLog"==o){if(n={username:$("#login_item_username").val(),password:$("#login_item_password").val()},!t.validateUsernamePwd(n.username,n.password))return;e="/api/v2/web/users/login"}else{if(n={username:$("#login_item_phone").val(),password:$("#login_item_code").val()},!t.validatePhoneCode(n.username,n.password))return;e="/api/v2/web/users/code-login"}$("#login_error_tip, #quick_login_error_tip").html("");var r=$("#auto_login").hasClass("active");n.auto_login=r,t.loginSubmitBtn.removeClass("btn-enable").addClass("btn-disable").text("正在登录，请稍后"),i({type:"POST",url:e,data:JSON.stringify(n),success:function(e){if(t.loginSubmitBtn.removeClass("btn-disable").addClass("btn-enable").text("登 录"),0===e.result)$(".login-box-shade-layer,.login-box").hide(),e.display_name||(e.display_name="暂无"),r?($.cookie("id",e.id,{expires:30,path:"/"}),$.cookie("userid",e.old_user_info_id,{expires:30,path:"/"}),$.cookie("truthid",e.uuid,{expires:30,path:"/"}),$.cookie("username",e.display_name,{expires:30,path:"/"}),$.cookie("image_url",e.image_url,{expires:30,path:"/"}),$.cookie("usertype",e.type,{expires:30,path:"/"})):($.cookie("id",e.id,{path:"/"}),$.cookie("userid",e.old_user_info_id,{path:"/"}),$.cookie("truthid",e.uuid,{path:"/"}),$.cookie("username",e.display_name,{path:"/"}),$.cookie("image_url",e.image_url,{path:"/"}),$.cookie("usertype",e.type,{path:"/"})),t.setHeaderLogin(),t.callBackWhenFinishLogin?t.callBackWhenFinishLogin():location.reload(!0);else{var i="commonLog"==o?t.errorTipWhenLogin:t.errorTipWhenCodeLogin;4===e.result?i.html(e.error_message):1013===e.result?i.html("commonLog"==o?"手机号或密码错误":"手机号或验证码错误"):10===e.result&&i.html("旧服务器出错，"+e.extra)}}})}},showPop:function(t){this.loginBox.show(),this.lognBoxShadeLayer.show(),t?this.callBackWhenFinishLogin=t:this.callBackWhenFinishLogin=null},logOut:function(){i({url:"/api/v2/users/logout",success:function(){$.cookie("id","",{expires:-1,path:"/"}),$.cookie("userid","",{expires:-1,path:"/"}),$.cookie("truthid","",{expires:-1,path:"/"}),$.cookie("username","",{expires:-1,path:"/"}),$.cookie("image_url","",{expires:-1,path:"/"}),$.cookie("usertype","",{expires:-1,path:"/"}),location.href="/"}})},setHeaderLogin:function(){var t=$.cookie("truthid"),e=$.cookie("username");t&&e&&(e.length>4&&($(".login-status").attr("title",e),e=e.substr(0,4)+"..."),$(".status1").hide(),$(".login-status").show().find("span").text("欢迎您,"+e))},initBtns:function(){var t=this;$("#login_type").find("li").bind("click",function(){$(".login-type-checked").removeClass("login-type-checked"),$(this).addClass("login-type-checked"),$(".form-type").hide(),$("#"+$(this).attr("data-type")).show()}),$(".login").bind("click",function(){$(".login-box-shade-layer,.login-box").show()}),$("#login_box_close").bind("click",function(){$(".login-box-shade-layer,.login-box").hide()}),$(".auto-login").bind("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),$("#get_phone_code").bind("click",function(){t.sendCode()}),$("#login_submit").bind("click",function(){t.userLogin()}),$(".login-out-btn").click(function(){t.logOut()})}};$(function(){n.init()})},function(t,exports){},,function(t,exports){var e={fixTop:function(){$(window).scrollTop()>$(".total-product").offset().top+40?$(".fix-top-wrap").show():$(".fix-top-wrap").hide()},initBtns:function(){var t=this;$(window).scroll(function(){t.fixTop()})}};$(function(){e.fixTop(),e.initBtns()})},function(t,exports,e){var i=e(5),n=e(21),o=e(22);e(12);var r={init:function(){this.cart()},cart:function(){i({url:"/api/v2/cart/brief",success:function(t){return $(".cart-num, .fix-cart-num").text(t.count),0==t.count?($(".cart-products-wrap").html(n()),1):void $(".cart-products-wrap").html(o(t))}})},deleteProduct:function(t){var e=this;i({type:"DELETE",url:"/api/v2/cart/delete?id="+t,success:function(t){0===t.result?e.cart():e.wrong(t)}})},wrong:function(t){5==t.result?alert("该资源不存在！"):6==t.result?alert("不支持该操作！"):8==t.result?alert("您没有权限操作，请联系管理员"):t.error_message?alert(t.error_message):1012==t.result?alert("提交频率过高，请稍后再试"):alert("出错了，请稍后重试"),location.reload()},initBtns:function(){var t=this;$(".cart-products-wrap").on("click",".delete-product",function(e){e.preventDefault(),t.deleteProduct($(this).attr("data-product-id"))})}};$(function(){r.init(),r.initBtns()})},function(t,exports,e){var i=e(11);t.exports=i("src/tpl/common/cartEmpty",'<div class="cart-empty font14"> 购物车还没有商品,快去挑选心仪的商品吧! </div>')},function(t,exports,e){var i=e(11);t.exports=i("src/tpl/common/cart",function(t,e){"use strict";var i=this,n=i.$helpers,o=i.$each,r=t.items,a=(t.$value,t.$index,i.$escape),s="";return s+='<div class="products"> <span class="font12 block mb15">最新加入的商品:</span> <ul> ',o(r,function(t,e){s+=' <li class="mb20 clearFix"> ',t.is_custom?(s+=' <a class="floatLeft" href="/cart"> <img src="',s+=a(n.getUrl(t.image_key)),s+='" width="38" height="38"/> </a> <a class="floatLeft ml10" href="/cart"> <div class="product-title font14 bold">',s+=a(t.title),s+='</div> <div class="product-brief font12 ellipsis w160">',s+=a(t.brief),s+="</div> </a> "):(s+=' <a class="floatLeft" href="/product?id=',s+=a(t.product_id),s+="#",s+=a(t.brief),s+='"> <img src="',s+=a(n.getUrl(t.image_key)),s+='" width="38" height="38"/> </a> <a class="floatLeft ml10" href="/product?id=',s+=a(t.product_id),s+="#",s+=a(t.brief),s+='"> <div class="product-title font14 bold">',s+=a(t.title),s+='</div> <div class="product-brief font12 ellipsis w160">',s+=a(t.brief),s+="</div> </a> "),s+=' <div class="floatRight"> <div class="red bold font16"> ',t.is_custom?s+=" 待定 ":(s+=" ",s+=a(n.processPrice(t.price)),s+=" x ",s+=a(t.quantity),s+=" "),s+=' </div> <div class="delete-product font12 pointer floatRight" data-product-id="',s+=a(t.id),s+='">删除</div> </div> </li> '}),s+=' </ul> <a href="/cart" class="see-cart floatRight font14 pointer">查看购物车 ></a> </div>',new String(s)})},function(t,exports,e){var i=e(5),n={callLater:function(t){i({type:"POST",url:"/api/v2/others/submit-contact",data:JSON.stringify({contact:t}),success:function(t){alert("稍后您将接到我们的电话，该通话对您完全免费，请放心接听！您也可以通过点击屏幕右侧的“联系客服”按钮直接QQ在线咨询。")}})},initBtns:function(){var t=this;$(".call-later-btn").click(function(){var e=$(".your-phone").val();/^([\+][0-9]{1,3}([ \.\-])?)?([\(][0-9]{1,6}[\)])?([0-9 \.\-]{1,32})(([A-Za-z \:]{1,11})?[0-9]{1,4}?)$/.test(e)?t.callLater(e):alert("请您输入正确的号码，手机号码请直接输入，座机请加区号")}),$(".right-close").bind("click",function(){$(".call-later").removeClass("active").addClass("none")}),$(".right-phone").bind("mouseover",function(){$(".call-later").removeClass("none")}),$(".goTop").bind("click",function(){$("body, html").animate({scrollTop:0},300)})}};$(function(){n.initBtns()})}]);